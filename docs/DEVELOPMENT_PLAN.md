# ADR 시스템 개발 계획 및 현황

작성일: 2025-10-21

## 1. 현재 개발 완료 현황

### ✅ 완료된 기능

#### 인증/권한
- [x] 로그인/로그아웃
- [x] JWT 토큰 인증
- [x] 역할 기반 접근 제어 (Developer, Admin, Distributor, Advertiser)
- [x] 개발자 사용자 전환 기능

#### 계정 관리
- [x] 계정 목록 조회
- [x] 계정 생성/수정/삭제
- [x] 추천인 시스템

#### 플레이스 관리 (기본)
- [x] 플레이스 생성
- [x] 플레이스 목록 조회
- [x] 플레이스 상세 페이지 (기본 구조)

#### 리뷰 시스템
- [x] 리뷰 작성 모달
- [x] 리뷰 이미지 업로드
- [x] 리뷰 임시저장/제출
- [x] 빈 리뷰 필터링 및 유효성 검사
- [x] 리뷰 승인/반려 (관리자)
- [x] 반려 시 포인트 환불

#### 포인트 시스템
- [x] 포인트 잔액 조회
- [x] 포인트 거래 내역
- [x] 5개 카드 분리 (보유/대기/획득/사용/회수)
- [x] 거래 타입별 필터링
- [x] 관리자 포인트 발급/회수
- [x] 리뷰 작성 시 포인트 차감
- [x] 리뷰 승인 시 포인트 확정
- [x] 사이드바에 포인트 잔액 표시

#### 시스템 설정
- [x] 컨텐츠 단가 설정
- [x] 시스템 설정 페이지

---

## 2. 현재 미흡하거나 변경 필요한 부분

### 🔧 수정 필요 (플레이스 관련)

#### PlacesPage.tsx (광고주용)
**현재 상태**:
- 기본 플레이스 목록만 표시
- 상세 버튼만 있음

**필요한 변경**:
- ✏️ 트래픽 현황 컬럼 추가 (작업량/목표량, 현재 순위)
- ✏️ [트래픽] 버튼 추가 → TrafficModal 연결
- ✏️ API 연동하여 트래픽 데이터 가져오기

#### PlaceDetailPage.tsx (광고주용)
**현재 상태**:
- 포인트 대시보드만 있음
- 탭 구조 없음

**필요한 변경**:
- ✏️ 탭 구조 추가 (대시보드/트래픽/리뷰/블로그)
- ✏️ 트래픽 탭 구현
- ✏️ 리뷰 탭 구현 (ReviewsPage 내용 가져오기)
- ✏️ 블로그 탭 구조 추비 (향후)
- ✏️ 대시보드 탭에 트래픽/리뷰 요약 추가

#### AdminPlacesPage.tsx (관리자용)
**현재 상태**:
- 존재하지 않음

**필요한 생성**:
- 🆕 전체 플레이스 목록 (모든 광고주)
- 🆕 광고주명 컬럼
- 🆕 트래픽/리뷰 현황 컬럼
- 🆕 광고주별 필터
- 🆕 상태별 필터

---

## 3. 신규 개발 필요 기능

### 🆕 트래픽 관리 시스템 (우선순위: 높음)

#### 데이터베이스
- [ ] traffic_requests 테이블 생성
- [ ] traffic_history 테이블 생성

#### 백엔드 API
- [ ] POST /api/traffic/request - 트래픽 신청
- [ ] GET /api/traffic/my-places - 내 플레이스 트래픽 현황
- [ ] GET /api/traffic/:id - 트래픽 상세
- [ ] PUT /api/traffic/:id - 트래픽 수정
- [ ] DELETE /api/traffic/:id - 트래픽 삭제
- [ ] GET /api/traffic/admin/all - 전체 트래픽 조회
- [ ] GET /api/traffic/admin/pending - 승인 대기 트래픽
- [ ] POST /api/traffic/:id/approve - 트래픽 승인
- [ ] POST /api/traffic/:id/reject - 트래픽 반려
- [ ] POST /api/traffic/:id/update-progress - 작업 진행상황 업데이트
- [ ] GET /api/traffic/:id/history - 트래픽 히스토리

#### 프론트엔드 컴포넌트
- [ ] TrafficModal.tsx - 트래픽 신청 모달
- [ ] TrafficManagementPage.tsx - 관리자용 트래픽 관리
- [ ] TrafficDetailModal.tsx - 트래픽 상세 모달

#### 비즈니스 로직
- [ ] 트래픽 신청 시 포인트 차감
- [ ] 승인 시 포인트 확정
- [ ] 반려 시 포인트 환불
- [ ] 트래픽 히스토리 자동 기록

### 🆕 블로그 관리 시스템 (우선순위: 중간)

#### 데이터베이스
- [ ] blog_posts 테이블 생성

#### 백엔드 API
- [ ] POST /api/blogs - 블로그 작성
- [ ] GET /api/blogs/place/:placeId - 플레이스별 블로그
- [ ] GET /api/blogs/:id - 블로그 상세
- [ ] PUT /api/blogs/:id - 블로그 수정
- [ ] DELETE /api/blogs/:id - 블로그 삭제
- [ ] GET /api/blogs/admin/pending - 승인 대기 블로그
- [ ] POST /api/blogs/:id/approve - 블로그 승인
- [ ] POST /api/blogs/:id/reject - 블로그 반려

#### 프론트엔드 컴포넌트
- [ ] BlogCreateModal.tsx - 블로그 작성 모달
- [ ] BlogManagementPage.tsx - 관리자용 블로그 승인

#### 비즈니스 로직
- [ ] 블로그 작성 시 포인트 차감
- [ ] 승인 시 포인트 확정
- [ ] 반려 시 포인트 환불

### 🆕 대시보드 개선 (우선순위: 중간)

#### 광고주 대시보드
- [ ] 전체 통계 카드
- [ ] 최근 활동 타임라인
- [ ] 퀵 액션 버튼

#### 관리자 대시보드
- [ ] 전체 통계 (플레이스/광고주/트래픽/리뷰)
- [ ] 승인 대기 알림
- [ ] 최근 활동
- [ ] 월별/일별 차트

---

## 4. 개발 일정 (제안)

### Phase 1: 트래픽 시스템 기본 구조 (1-2주)
**목표**: 광고주가 트래픽을 신청하고 관리자가 승인할 수 있는 기본 기능

- Week 1:
  - [ ] 데이터베이스 스키마 생성
  - [ ] 백엔드 API 개발 (신청/조회/승인/반려)
  - [ ] TrafficModal 컴포넌트 개발

- Week 2:
  - [ ] PlacesPage 트래픽 현황 표시
  - [ ] TrafficManagementPage 개발
  - [ ] 포인트 연동 및 테스트

### Phase 2: 플레이스 상세 페이지 개선 (1주)
**목표**: 탭 구조로 트래픽/리뷰를 분리하여 관리

- Week 3:
  - [ ] PlaceDetailPage 탭 구조 적용
  - [ ] 트래픽 탭 구현
  - [ ] 리뷰 탭 구현
  - [ ] 대시보드 탭 요약 정보 추가

### Phase 3: 트래픽 고급 기능 (1주)
**목표**: 트래픽 히스토리, 순위 추적, 통계

- Week 4:
  - [ ] 트래픽 히스토리 기록 시스템
  - [ ] 순위 변화 그래프
  - [ ] 월별/일별 통계
  - [ ] 작업 진행상황 업데이트 기능

### Phase 4: 블로그 시스템 (2주)
**목표**: 블로그 작성부터 승인까지 전체 플로우

- Week 5:
  - [ ] 데이터베이스 스키마 생성
  - [ ] 백엔드 API 개발
  - [ ] BlogCreateModal 개발

- Week 6:
  - [ ] PlaceDetailPage 블로그 탭 구현
  - [ ] BlogManagementPage 개발
  - [ ] 포인트 연동 및 테스트

### Phase 5: 대시보드 및 통계 (1주)
**목표**: 사용자 경험 개선

- Week 7:
  - [ ] 광고주 대시보드 개선
  - [ ] 관리자 대시보드 개선
  - [ ] 통계 차트 추가
  - [ ] 최근 활동 타임라인

### Phase 6: 관리자용 플레이스 관리 (1주)
**목표**: 관리자가 전체 플레이스를 효율적으로 관리

- Week 8:
  - [ ] AdminPlacesPage 개발
  - [ ] 전체 플레이스 조회
  - [ ] 광고주별/상태별 필터
  - [ ] 일괄 작업 기능

---

## 5. 기술 스택 및 의존성

### 프론트엔드
- React 18
- TypeScript
- React Router v6
- TailwindCSS
- Lucide React (아이콘)

### 백엔드
- Node.js
- Express.js
- PostgreSQL
- JWT 인증
- Multer (이미지 업로드)

### 필요한 추가 라이브러리
- [ ] Chart.js 또는 Recharts (차트용)
- [ ] React Query (API 상태 관리, 선택적)
- [ ] Date-fns (날짜 처리)

---

## 6. 주요 변경점 요약

### 변경 전 (현재)
- 플레이스 목록: 단순 리스트
- 플레이스 상세: 포인트 대시보드만
- 트래픽: 미구현
- 블로그: 미구현

### 변경 후 (목표)
- 플레이스 목록: 트래픽 현황 + [트래픽] 버튼
- 플레이스 상세: 탭 구조 (대시보드/트래픽/리뷰/블로그)
- 트래픽: 신청 → 승인 → 진행 → 완료 전체 플로우
- 블로그: 작성 → 승인 전체 플로우
- 관리자: 역할별 최적화된 메뉴 구조

---

## 7. 개발 우선순위

### 🔴 긴급 (현재 시스템 개선)
1. PlacesPage 트래픽 현황 표시
2. PlaceDetailPage 탭 구조 적용

### 🟡 중요 (핵심 기능)
3. 트래픽 시스템 전체 (Phase 1-3)
4. 블로그 시스템 전체 (Phase 4)

### 🟢 일반 (UX 개선)
5. 대시보드 개선 (Phase 5)
6. 관리자 플레이스 관리 (Phase 6)

---

## 8. 리스크 및 고려사항

### 기술적 리스크
- **데이터베이스 마이그레이션**: 기존 데이터 영향 없이 새 테이블 추가 필요
- **포인트 트랜잭션 무결성**: 트래픽/블로그 승인/반려 시 포인트 처리 정확성
- **이미지 스토리지**: 트래픽/블로그 이미지 저장 용량 관리

### 비즈니스 리스크
- **트래픽 순위 데이터 출처**: 실제 순위 데이터를 어떻게 가져올지 결정 필요
- **트래픽 작업량 검증**: 실제 트래픽이 발생했는지 검증 방법
- **단가 정책**: 트래픽/블로그 단가 산정 기준

### UX 고려사항
- **모바일 반응형**: 모든 새 페이지/모달 모바일 최적화
- **로딩 상태**: 데이터 로딩 중 스켈레톤 UI
- **에러 처리**: 사용자 친화적인 에러 메시지

---

## 9. 테스트 계획

### 단위 테스트
- [ ] API 엔드포인트 테스트
- [ ] 포인트 트랜잭션 로직 테스트
- [ ] 권한 체크 테스트

### 통합 테스트
- [ ] 트래픽 신청 → 승인 → 완료 플로우
- [ ] 블로그 작성 → 승인 플로우
- [ ] 포인트 발급 → 사용 → 환불 플로우

### E2E 테스트
- [ ] 광고주 전체 워크플로우
- [ ] 관리자 전체 워크플로우
- [ ] 크로스 브라우저 테스트

---

## 10. 문서화

### 필요한 문서
- [x] MENU_STRUCTURE_DESIGN.md (완료)
- [x] DEVELOPMENT_PLAN.md (현재 문서)
- [ ] API_DOCUMENTATION.md (API 스펙)
- [ ] DATABASE_SCHEMA.md (DB 스키마)
- [ ] USER_GUIDE.md (사용자 가이드)
- [ ] ADMIN_GUIDE.md (관리자 가이드)

---

## 11. 다음 단계

### 즉시 시작 가능
1. **데이터베이스 스키마 작성**
   - traffic_requests 테이블
   - traffic_history 테이블
   - 마이그레이션 스크립트

2. **TrafficModal 컴포넌트 개발**
   - UI 디자인
   - 폼 유효성 검사
   - API 연동 준비

3. **PlacesPage 수정**
   - 트래픽 현황 컬럼 추가
   - [트래픽] 버튼 추가
   - Mock 데이터로 UI 먼저 구현

### 논의 필요
- **트래픽 순위 데이터**: 실제 어떻게 가져올지 (API? 수동입력?)
- **트래픽 단가**: 회당 얼마로 책정할지
- **블로그 단가**: 건당 얼마로 책정할지
- **작업 검증**: 트래픽/블로그 실제 작업 여부 확인 방법

---

## 변경 이력

### 2025-10-21
- 초안 작성
- 현재 개발 현황 정리
- 8주 개발 계획 수립
